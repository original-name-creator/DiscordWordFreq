/*
 * This source file was generated by the Gradle 'init' task
 */
package org.example;

import java.io.File;
import java.io.IOException;
import java.util.Arrays;
import java.util.List;

import org.example.JSONobjects.Message;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.*;

public class App {

    final static String PATH = "C:\\Users\\lukes\\Downloads\\package\\messages";

    public static void main(String[] args) {

        ObjectMapper objectMapper = new ObjectMapper();

        File[] directories = new File(PATH).listFiles(File::isDirectory);

        String[] dirnames = new String[directories.length];

        for (int i = 0; i < directories.length; i++) {
            dirnames[i] = directories[i].getAbsolutePath().replace(PATH  + "\\", "");
        }

        System.out.println(directories[0].getAbsolutePath());


        try {
            List<Message> messages = objectMapper.readValue(new File(directories[0].getAbsolutePath() + "\\messages.json"), new TypeReference<List<Message>>(){});
        } catch (IOException e) {
            System.out.println("\u001B[31m" + "Failed to parse JSON, You figure it out" + "\u001B[0m");
            e.printStackTrace();
        }


    }
}